- en: Chapter 2 TypeScript Basics
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://keleshev.com/compiling-to-assembly-from-scratch/02-typescript-basics](https://keleshev.com/compiling-to-assembly-from-scratch/02-typescript-basics)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '[Compiling to Assembly from Scratch](./#table-of-contents)'
  prefs: []
  type: TYPE_NORMAL
- en: by [Vladimir Keleshev](/)
  prefs: []
  type: TYPE_NORMAL
- en: This chapter gets you up-to-speed with TypeScript. Feel free to skip it if you
    already know it.
  prefs: []
  type: TYPE_NORMAL
- en: TypeScript is designed to be a *superset* (or an extension) to JavaScript that
    adds type annotations and type checking. So, apart from the type annotations,
    it is just modern-day JavaScript.
  prefs: []
  type: TYPE_NORMAL
- en: 'Let’s get going. First, `console.log` prints a message to the console:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: 'Strings use double or single quotes. Strings written with back-ticks are called
    *template literals*. They can be multiline, *and* they can be interpolated (or
    injected with expressions), like in a template:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: 'Next, `console.assert` is a quick and portable way to test something, if you
    don’t have a testing framework at hand:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: Triple equals `===` is strict (or exact) equality, while double equals `==`
    is loose equality. Similarly with `!==` and `!=`. For example, with loose equality
    `true` equals to `1`, but with strict equality they are not equal. We will only
    use strict equality in the compiler code, but in the basline language we will
    use `==` and `!=` operators.
  prefs: []
  type: TYPE_NORMAL
- en: 'To abnormally terminate a program, you can throw an exception:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: It is a good practice to define your own exceptions, but for brevity, we’ll
    use built-in exceptions in this book.
  prefs: []
  type: TYPE_NORMAL
- en: 'Functions can be defined using the `function` keyword:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: In many cases, type annotations are optional in TypeScript. However, they are
    necessary for most function (and method) parameters. So far, we were describing
    features that are just plain JavaScript. However, here we’ve got a function that
    has a *type annotation*. The types of the parameters are *annotated* as `number`.
  prefs: []
  type: TYPE_NORMAL
- en: 'Another way to define a function is by writing a so-called *arrow function*,
    (which is also called an *anonymous function*, or a *lambda function*):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: Next up are variables. They come in several forms in TypeScript (and JavaScript).
    Variables are bound with `var`, `let` (and `const`). While `var` scope is at the
    function (or method) level, `let` scope is delimited with braces.
  prefs: []
  type: TYPE_NORMAL
- en: 'Compare `var`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE6]'
  prefs: []
  type: TYPE_PRE
- en: 'With `let`:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE7]'
  prefs: []
  type: TYPE_PRE
- en: We’ll only be using `let` in the compiler code, however, `var` needs mentioning
    because it is `var` that we will implement for the baseline language.
  prefs: []
  type: TYPE_NORMAL
- en: 'Although mostly optional, bindings can be type-annotated:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE8]'
  prefs: []
  type: TYPE_PRE
- en: Here, `Array<number>` means an array of numbers.
  prefs: []
  type: TYPE_NORMAL
- en: 'TypeScript, like JavaScript, allows for literal regular expressions. While
    strings are delimited with quotes, literal regular expressions are delimited with
    forward slashes:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE9]'
  prefs: []
  type: TYPE_PRE
- en: 'Classes are the go-to way for creating custom data types in TypeScript. Here’s
    a simple data class:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE10]'
  prefs: []
  type: TYPE_PRE
- en: 'You create a new object using the `new` keyword:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE11]'
  prefs: []
  type: TYPE_PRE
- en: 'TypeScript has a shortcut for defining simple data classes like this, where
    constructor parameters are immediately assigned as instance variables:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE12]'
  prefs: []
  type: TYPE_PRE
- en: Note how the `public` keyword is specified in the parameter list. This is exactly
    equivalent to the previous definition. We will use this shortcut a lot in this
    book.
  prefs: []
  type: TYPE_NORMAL
- en: We will also define some classes that can clash with the built-in ones, like
    `Boolean` and `Number`. To avoid that, make sure to define them at the module
    scope and not at the global scope. The simplest way to acheive that is to make
    sure to add an empty `**export**` `{}` to your source file. Using `**import**`
    or `**export**` keywords changes the file scope from global to module scope.
  prefs: []
  type: TYPE_NORMAL
- en: Next is a more extensive example, with static variable `zero`, static method
    `origin`, and an instance method `toString`. Remember that static variables and
    static methods are just global variables and global methods that are namespaced
    by the class name.
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE13]'
  prefs: []
  type: TYPE_PRE
- en: You might find that some of the whitespace and formatting choices look odd in
    this book. This is because the code listings are optimized for compactness, which
    is important for a print book.
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
- en: There’s much more to TypeScript, but we will, for the most part, limit ourselves
    to the subset described here.
  prefs: []
  type: TYPE_NORMAL
- en: '[Next: Chapter 3\. High-level Compiler Overview](./03-high-level-compiler-overview)'
  prefs: []
  type: TYPE_NORMAL
- en: '* * *'
  prefs: []
  type: TYPE_NORMAL
