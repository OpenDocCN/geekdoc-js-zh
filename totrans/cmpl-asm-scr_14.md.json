["```js\ninterface AST {\n emit(env: Environment): void;\n emitDynamic(env: Environment): void;\n typeCheck(env: TypeEnvironment): Type;\n equal(other: AST): boolean;\n}\n```", "```js\ninterface AST {\n visit<T>(v: Visitor<T>): T;\n equal(other: AST): boolean;\n}\n\ninterface Visitor<T> {\n visitAssert(node: Assert): T;\n visitLength(node: Length): T;\n visitNumber(node: Number): T;\n visitBoolean(node: Boolean): T;\n visitNot(node: Not): T;\n visitEqual(node: Equal): T;\n …\n}\n```", "```js\nclass Assert implements AST {\n constructor(public condition: AST) {}\n\n visit<T>(v: Visitor<T>) {\n return v.visitAssert(this);\n }\n\n equals(other: AST): boolean {…}\n}\n\nclass Length implements AST {\n constructor(public array: AST) {}\n\n visit<T>(v: Visitor<T>) {\n return v.visitLength(this);\n }\n\n equals(other: AST): boolean {…}\n}\n```", "```js\nclass CodeGenerator implements Visitor<void> {\n constructor(public locals: Map<string, number>,\n public nextLocalOffset: number) {}\n\n visitAssert(node: Assert) {\n node.condition.visit(this);\n emit(`  cmp r0, #1`);\n emit(`  moveq r0, #'.'`);\n emit(`  movne r0, #'F'`);\n emit(`  bl putchar`);\n }\n\n visitLength(node: Length) {\n node.array.visit(this);\n emit(`  ldr r0, [r0, #0]`);\n }\n\n …\n}\n```", "```js\n emit(env: Environment): void {\n this.array.emit(env);\n emit(`  ldr r0, [r0, #0]`);\n }\n```", "```js\n visitLength(node: Length) {\n node.array.visit(this);\n emit(`  ldr r0, [r0, #0]`);\n }\n```", "```js\n let env = new Environment(locals, -20);\n this.body.emit(env);\n```", "```js\n let visitor = new CodeGenerator(locals, -20);\n node.body.visit(visitor);\n```"]