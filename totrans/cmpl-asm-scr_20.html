<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Appendix B
GAS v. ARMASM Syntax</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Appendix B
GAS v. ARMASM Syntax</h1>
<blockquote>原文：<a href="https://keleshev.com/compiling-to-assembly-from-scratch/appendix-b-gas-v-armasm-syntax">https://keleshev.com/compiling-to-assembly-from-scratch/appendix-b-gas-v-armasm-syntax</a></blockquote>




<header>

<a href="./#table-of-contents">Compiling to Assembly from Scratch</a>
<br/>by <a href="/">Vladimir Keleshev</a>
</header>
<p>Two different syntaxes are used for ARM assembly. The first one is the GNU Assembler (GAS) syntax. It is also supported by the official ARM toolchain based on Clang called <code>armclang</code>.</p>
<p>The other one is the legacy ARMASM syntax. Most likely, you will not need to deal with it, but I include a small Rosetta Stone–style (side-by-side) comparison cheat sheet for completeness.</p>
<h2 id="gnu-assembler-syntax">GNU Assembler Syntax</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode js"><code class="sourceCode javascript"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"/><span class="co">/* Hello-world program.</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"/><span class="co">   Prints "Hello, assembly!" and exits with code 42. */</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"/></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"/><span class="op">.</span><span class="at">data</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"/>  hello<span class="op">:</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"/>    <span class="op">.</span><span class="at">string</span> <span class="st">"Hello, assembly!"</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"/></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"/><span class="op">.</span><span class="at">text</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"/>  <span class="op">.</span><span class="at">global</span> main</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"/>  main<span class="op">:</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"/>    push {ip<span class="op">,</span> lr}</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"/></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"/>    ldr r0<span class="op">,</span> <span class="op">=</span>hello</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"/>    bl printf</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"/></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"/>    mov r0<span class="op">,</span> #<span class="dv">41</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"/>    add r0<span class="op">,</span> r0<span class="op">,</span> #<span class="dv">1</span>  <span class="co">// Increment 41 by one.</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"/></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"/>    pop {ip<span class="op">,</span> lr}</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"/>    bx lr</span></code></pre></div>
<h2 id="legacy-armasm-syntax">Legacy ARMASM Syntax</h2>
<pre><code>; Hello-world program.
; Prints "Hello, assembly!" and exits with code 42.

  AREA ||.data||, DATA
hello
  DCB  "Hello, assembly!",0

  AREA ||.text||, CODE
main PROC
  push {ip, lr}

  ldr r0, =hello
  bl printf

  mov r0, #41
  add r0, r0, #1  ; Increment 41 by one.

  pop {ip, lr}
  bx lr</code></pre>


  <hr class="fleuron"/>
    
</body>
</html>